function gotoTop(){document.getElementById("koment-box").scrollTop=0}jQuery(document).ready((function(e){function t(){return e("#cui-overlay, #cui-modal").remove(),!1}function i(e,t,i){if("function"==typeof jQuery.fn.jPages&&"true"==CUI.jpages){var a="cui-container-comment-"+e,n="div.cui-holder-"+e;jQuery("#"+a+" > li").length>t&&(i&&jQuery("#"+a).children().removeClass("animated jp-hidden"),jQuery(n).show().jPages({containerID:a,previous:"← "+CUI_WP.textNavPrev,next:CUI_WP.textNavNext+" →",perPage:parseInt(t,10),minHeight:!1,keyBrowse:!0,direction:"forward",animation:"fadeIn"}))}return!1}function a(e){return e||(e=5),{n1:Math.floor(Math.random()*e+1),n2:Math.floor(Math.random()*e+1)}}function n(t){if(t.length){var i=t.offset().top,a=Math.abs(i-200);e("html,body").animate({scrollTop:a},"slow")}return!1}function o(e){for(var t=e.substring(e.indexOf("?")+1).split("&"),i={},a=0;a<t.length;a++){var n=t[a].split("=");i[n[0]]=n[1]}return i}function c(t){e("form#commentform-"+t).find('[name="comment_parent"]').val("0"),e("form#commentform-"+t).find(".cui-textarea").val("").attr("placeholder",CUI.textWriteComment),e("form#commentform-"+t).find('input[name="submit"]').removeClass(),e("form#commentform-"+t).find("input.cui-cancel-btn").hide(),autosize.update(e("#cui-textarea-"+t)),e("input, textarea").removeClass("cui-error"),captchaValues=a(9),e(".cui-captcha-text").html(captchaValues.n1+" &#43; "+captchaValues.n2+" = ")}function r(e){CUI.widthWrap?parseInt(CUI.widthWrap,10):e.outerWidth()}function u(e){(CUI.widthWrap?parseInt(CUI.widthWrap,10):e.outerWidth())<=480?e.addClass("cui-full"):e.removeClass("cui-full")}function l(e,t){var i=document.getElementById("cui-textarea-"+e);if(document.selection)return i.focus(),void(document.selection.createRange().text=t);if(i.selectionStart||"0"==i.selectionStart){var a=i.selectionStart,n=i.selectionEnd,o=i.scrollTop;i.value=i.value.substring(0,a)+t+i.value.substring(n,i.value.length),i.focus(),i.selectionStart=a+t.length,i.selectionEnd=a+t.length,i.scrollTop=o}else i.value+=textArea.value,i.focus()}function m(e){console.log(e)}function s(e,t){console.log(e,t)}e(this).find(":submit").removeAttr("disabled"),CUI={ajaxurl:CUI_WP.ajaxurl,nonce:CUI_WP.cuiNonce,textCounter:CUI_WP.textCounter,textCounterNum:""!==CUI_WP.textCounterNum?CUI_WP.textCounterNum:300,jpages:CUI_WP.jpages,numPerPage:""!==CUI_WP.jPagesNum?CUI_WP.jPagesNum:10,widthWrap:""!==CUI_WP.widthWrap?CUI_WP.widthWrap:"",autoLoad:CUI_WP.autoLoad,thanksComment:CUI_WP.thanksComment,thanksReplyComment:CUI_WP.thanksReplyComment,duplicateComment:CUI_WP.duplicateComment,insertImage:CUI_WP.insertImage,insertVideo:CUI_WP.insertVideo,insertLink:CUI_WP.insertLink,accept:CUI_WP.accept,cancel:CUI_WP.cancel,reply:CUI_WP.reply,checkVideo:CUI_WP.checkVideo,textWriteComment:CUI_WP.textWriteComment,classPopularComment:CUI_WP.classPopularComment},jQuery(".cui-wrap-comments").each((function(e,t){var i=jQuery("[id='"+this.id+"']");i.length>1&&i.slice(1).closest(".cui-wrapper").remove()})),jQuery('.cui-container-form [name="comment_parent"], .cui-container-form [name="comment_post_ID"]').each((function(t,i){e(i).removeAttr("id")})),"function"==typeof jQuery.fn.placeholder&&e(".cui-wrap-form input, .cui-wrap-form textarea, #cui-modal input, #cui-modal textarea").placeholder(),"function"==typeof autosize&&autosize(e("textarea.cui-textarea")),e(".cui-wrapper").each((function(){u(e(this)),r(e(this))})),e(window).resize((function(){e(".cui-wrapper").each((function(){u(e(this)),r(e(this))}))})),e(".cui-captcha").length&&(captchaValues=a(9),e(".cui-captcha-text").html(captchaValues.n1+" &#43; "+captchaValues.n2+" = ")),e(document).delegate("a.cui-link","click",(function(t){t.preventDefault();var a=o(e(this).attr("href")),n=a.post_id,c=a.comments,r=a.get,u=a.order;e("#cui-wrap-commnent-"+n).slideToggle(200);var l=e("#cui-container-comment-"+n);return l.length&&0===l.html().length&&function(t,a,n,o){var c=e("#cui-comment-status-"+t),r=e("ul#cui-container-comment-"+t);a>0&&jQuery.ajax({type:"POST",dataType:"html",url:CUI.ajaxurl,data:{action:"get_comments",post_id:t,get:n,order:o,nonce:CUI.nonce},beforeSend:function(){c.addClass("cui-loading").html('<span class="cuio-loading"></span>').show()},success:function(a){c.removeClass("cui-loading").html("").hide(),r.html(a),function(t,i){if("likes"==i.data("order")&&i.hasClass("cui-multiple-comments cui-has-likes")){var a=i.find(">.cui-item-comment").eq(0).data("likes"),n=!1;i.find(">.cui-item-comment").each((function(t,i){n||e(i).data("likes")!=a||(e(i).addClass(CUI.classPopularComment),n=!0)}))}}(0,r),r.show(),i(t,CUI.numPerPage),function(t){t.find(">li.depth-1.cui-item-comment").each((function(t,i){var a=e(this).find("> ul.children");a.length&&a.find("li").length>3&&(a.find("li:gt(2)").css("display","none"),a.append('<a href="#" class="cui-load-more-comments">'+CUI_WP.textLoadMore+"</a>"))}))}(r)},error:function(e,t,i){m("ajax error"),m("jqXHR"),m(e),m("errorThrown"),m(i)},complete:function(e,t){}})}(n,c,r,u),!1})),e("a.cui-link").length&&e("a.cui-link.auto-load-true").each((function(){e(this).click()})),e(document).find(".cui-container-form").keyup((function(t){post_id=e(this).find("form").attr("id").replace("commentform-",""),27==t.which&&c(post_id)})),e(document).delegate("input.cui-cancel-btn","click",(function(t){t.stopPropagation(),post_id=e(this).closest("form").attr("id").replace("commentform-",""),c(post_id)})),e(document).delegate(".cui-reply-link","click",(function(t){t.preventDefault();var i=o(e(this).attr("href")),a=i.comment_id,r=i.post_id;c(r);var u=e("#commentform-"+r);return u.find('[name="comment_parent"]').val(a),u.find(".cui-textarea").val("").attr("placeholder",CUI_WP.reply+". ESC ("+CUI_WP.cancel+")").focus(),u.find('input[name="submit"]').addClass("cui-reply-action"),e("#commentform-"+r).find("input.cui-cancel-btn").show(),n(u),!1})),e(document).delegate(".cui-edit-link","click",(function(t){t.preventDefault();var i=o(e(this).attr("href")),a=i.comment_id,r=i.post_id;c(r);var u=e("#commentform-"+r);u.find('[name="comment_parent"]').val(a),u.find(".cui-textarea").val("").focus(),u.find('input[name="submit"]').addClass("cui-edit-action"),n(u),function(t,i){e("#commentform-"+t),e("#cui-comment-status-"+t);jQuery.ajax({type:"POST",dataType:"html",url:CUI.ajaxurl,data:{action:"get_comment_text_cui",post_id:t,comment_id:i,nonce:CUI.nonce},beforeSend:function(){},success:function(i){"cui-error"!==i&&(e("#cui-textarea-"+t).val(i),autosize.update(e("#cui-textarea-"+t)),e("#commentform-"+t).find("input.cui-cancel-btn").show())},complete:function(e,t){}})}(r,a)})),e(document).delegate(".cui-delete-link","click",(function(t){t.preventDefault();var i=o(e(this).attr("href")),a=i.comment_id,n=i.post_id;confirm(CUI_WP.textMsgDeleteComment)&&function(t,i){jQuery.ajax({type:"POST",dataType:"html",url:CUI.ajaxurl,data:{action:"delete_comment_cui",post_id:t,comment_id:i,nonce:CUI.nonce},beforeSend:function(){},success:function(t){"ok"===t&&e("#cui-item-comment-"+i).remove()}})}(n,a)})),e("input, textarea").focus((function(t){e(this).removeClass("cui-error"),e(this).siblings(".cui-error-info").hide()})),e(document).on("submit",".cui-container-form form",(function(t){t.preventDefault(),e(this).find(":submit").attr("disabled","disabled"),e("input, textarea").removeClass("cui-error");var o=e(this).attr("id").replace("commentform-",""),r=e("#commentform-"+o),u=e("#cui-link-"+o).attr("href").split("=")[2],l=!0;if(r.find("textarea").val().replace(/\s+/g," ").length<2)return r.find(".cui-textarea").addClass("cui-error"),r.find(".cui-error-info-text").show(),setTimeout((function(){r.find(".cui-error-info-text").fadeOut(500)}),2500),e(this).find(":submit").removeAttr("disabled"),!1;if(e(this).find("input#author").length){var m=e(this).find("input#author"),d=m.val().replace(/\s+/g," ");" "!=d&&/^[^?%$=\/]{1,30}$/i.test(d)||(m.addClass("cui-error"),r.find(".cui-error-info-name").show(),setTimeout((function(){r.find(".cui-error-info-name").fadeOut(500)}),3e3),l=!1)}if(e(this).find("input#email").length){var f=e(this).find("input#email"),p=f.val().replace(/\s+/g,"");f.val(p),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i.test(p)||(f.addClass("cui-error"),r.find(".cui-error-info-email").show(),setTimeout((function(){r.find(".cui-error-info-email").fadeOut(500)}),3e3),l=!1)}if(!l)return e(this).find(":submit").removeAttr("disabled"),!1;if(e(".cui-captcha").length){var h=e("#cui-captcha-value-"+o);l=!0,h.val()!=captchaValues.n1+captchaValues.n2&&(l=!1,h.addClass("cui-error")),captchaValues=a(9),e(".cui-captcha-text").html(captchaValues.n1+" &#43; "+captchaValues.n2+" = "),h.val("")}return!0===l&&(r.find('input[name="comment_press"]').length||r.find('input[name="submit"]').after('<input type="hidden" name="comment_press" value="true">'),comment_id=r.find('[name="comment_parent"]').val(),r.find('input[name="submit"]').hasClass("cui-edit-action")?function(t,i){var a=e("#commentform-"+t),o=e("#cui-comment-status-"+t);jQuery.ajax({type:"POST",url:CUI.ajaxurl,data:{action:"edit_comment_cui",post_id:t,comment_id:i,comment_content:a.find(".cui-textarea").val(),nonce:CUI.nonce},beforeSend:function(){o.addClass("cui-loading").html('<span class="cuio-loading"></span>').show()},success:function(t){o.removeClass("cui-loading").html("");var a=jQuery.parseJSON(t);!0===a.ok?(e("#cui-comment-"+i).find(".cui-comment-text").html(a.comment_text),setTimeout((function(){n(e("#cui-comment-"+i))}),1e3)):console.log("Errors: "+a.error)},complete:function(e,t){setTimeout((function(){o.removeClass("cui-loading").fadeOut(600)}),2500)}})}(o,comment_id):r.find('input[name="submit"]').hasClass("cui-reply-action")?function(t,i,a){var o=e("#cui-link-"+t),c=e("#commentform-"+t),r=e("#cui-comment-status-"+t),u=e("#cui-item-comment-"+i),l=c.serialize();e.ajax({type:"post",method:"post",url:c.attr("action"),data:l,beforeSend:function(){r.addClass("cui-loading").html('<span class="cuio-loading"></span>').show()},success:function(e,t){s("success data",e),r.removeClass("cui-loading").html(""),"error"!=e?(r.html('<p class="cui-ajax-success">'+CUI.thanksReplyComment+"</p>"),o.find("span").length&&(a=parseInt(a,10)+1,o.find("span").html(a)),u.find("ul").length||u.append('<ul class="children"></ul>'),u.find("ul").append(e),setTimeout((function(){n(u.find("ul li").last())}),1e3)):r.html('<p class="cui-ajax-error">Error in processing your form.</p>')},error:function(e,t,i){r.html('<p class="cui-ajax-error" >'+CUI.duplicateComment+"</p>")},complete:function(e,t){setTimeout((function(){r.removeClass("cui-loading").fadeOut(600)}),2500)}})}(o,comment_id,u):function(t,a){var n=e("#cui-link-"+t),o=e("#commentform-"+t),c=e("#cui-comment-status-"+t),r=o.serialize();e.ajax({type:"post",method:"post",url:o.attr("action"),data:r,dataType:"html",beforeSend:function(){c.addClass("cui-loading").html('<span class="cuio-loading"></span>').show()},success:function(o,r){s("success data",o),c.removeClass("cui-loading").html(""),"error"!=o?(c.html('<p class="cui-ajax-success">'+CUI.thanksComment+"</p>"),n.find("span").length&&(a=String(parseInt(a,10)+1),n.find("span").html(a))):c.html('<p class="cui-ajax-error">Error processing your form</p>'),e("ul#cui-container-comment-"+t).prepend(o).show(),i(t,CUI.numPerPage,!0)},error:function(e,t,i){c.removeClass("cui-loading").html('<p class="cui-ajax-error" >'+CUI.duplicateComment+"</p>")},complete:function(e,t){setTimeout((function(){c.removeClass("cui-loading").fadeOut(600)}),2500)}})}(o,u),c(o)),e(this).find(":submit").removeAttr("disabled"),!1})),e(document).delegate("a.cui-load-more-comments","click",(function(t){t.preventDefault(),e(this).parent().find("li.cui-item-comment").fadeIn("slow"),e(this).remove()})),e(document).delegate(".cui-media-btns a","click",(function(t){t.preventDefault();var i=e(this).attr("href").split("=")[1].replace("&action",""),a=e(this).attr("href").split("=")[2];switch(e("body").append('<div id="cui-overlay"></div>'),e("body").append('<div id="cui-modal"></div>'),$modalHtml='<div id="cui-modal-wrap"><span id="cui-modal-close"></span><div id="cui-modal-header"><h3 id="cui-modal-title">Título</h3></div><div id="cui-modal-content"><p>Hola</p></div><div id="cui-modal-footer"><a id="cui-modal-ok-'+i+'" class="cui-modal-ok cui-modal-btn" href="#">'+CUI.accept+'</a><a class="cui-modal-cancel cui-modal-btn" href="#">'+CUI.cancel+"</a></div></div>",e("#cui-modal").append($modalHtml).fadeIn(250),a){case"url":e("#cui-modal").removeClass().addClass("cui-modal-url"),e("#cui-modal-title").html(CUI.insertLink),e("#cui-modal-content").html('<input type="text" id="cui-modal-url-link" class="cui-modal-input" placeholder="'+CUI_WP.textUrlLink+'"/><input type="text" id="cui-modal-text-link" class="cui-modal-input" placeholder="'+CUI_WP.textToDisplay+'"/>');break;case"image":e("#cui-modal").removeClass().addClass("cui-modal-image"),e("#cui-modal-title").html(CUI.insertImage),e("#cui-modal-content").html('<input type="text" id="cui-modal-url-image" class="cui-modal-input" placeholder="'+CUI_WP.textUrlImage+'"/><div id="cui-modal-preview"></div>');break;case"video":e("#cui-modal").removeClass().addClass("cui-modal-video"),e("#cui-modal-title").html(CUI.insertVideo),e("#cui-modal-content").html('<input type="text" id="cui-modal-url-video" class="cui-modal-input" placeholder="'+CUI_WP.textUrlVideo+'"/><div id="cui-modal-preview"></div>'),e("#cui-modal-footer").prepend('<a id="cui-modal-verifique-video" class="cui-modal-verifique cui-modal-btn" href="#">'+CUI.checkVideo+"</a>")}})),e(document).delegate(".cui-modal-ok","click",(function(i){i.preventDefault(),e("#cui-modal input, #cui-modal textarea").removeClass("cui-error");var a=e("#cui-modal").attr("class"),n=e(this).attr("id").replace("cui-modal-ok-","");switch(a){case"cui-modal-url":!function(t){var i=!0,a=e("#cui-modal-url-link"),n=e("#cui-modal-text-link");a.val().length<1&&(i=!1,a.addClass("cui-error"));n.val().length<1&&(i=!1,n.addClass("cui-error"));if(i){l(t,'<a href="http://'+a.val().replace(/https?:\/\//gi,"")+'" title="'+n.val()+'" rel="nofollow" target="_blank">'+n.val()+"</a>")}}(n);break;case"cui-modal-image":!function(t){var i=!0,a=e("#cui-modal-url-image");a.val().length<1&&(i=!1,a.addClass("cui-error"));if(i){l(t,'<img src="'+a.val()+'" />')}}(n);break;case"cui-modal-video":!function(t){var i=!0;e("#cui-modal-url-video");e("#cui-modal-preview").find("iframe").length||(i=!1,e("#cui-modal-preview").html('<p class="cui-modal-error">Please check the video url</p>'));if(i){l(t,"<p>"+e("#cui-modal-preview").find('input[type="hidden"]').val()+"</p>")}}(n)}return autosize.update(e(".cui-textarea")),t(),!1})),e(document).delegate("#cui-modal input, #cui-modal textarea","focus",(function(t){e(this).removeClass("cui-error")})),e(document).delegate("#cui-modal-url-image","change",(function(t){setTimeout((function(){e("#cui-modal-preview").html('<img src="'+e("#cui-modal-url-image").val()+'" />')}),200)})),e(document).delegate("#cui-modal-verifique-video","click",(function(t){t.preventDefault();var i=e("#cui-modal-url-video"),a=i.val().replace(/\s+/g,"");if(i.removeClass("cui-error"),e(this).attr("id",""),a.length<1)return i.addClass("cui-error"),e(".cui-modal-video").find("a.cui-modal-verifique").attr("id","cui-modal-verifique-video"),!1;var n="url_video="+a;e.ajax({url:CUI.ajaxurl,data:n+"&action=verificar_video_CUI",type:"POST",dataType:"html",beforeSend:function(){e("#cui-modal-preview").html('<div class="cui-loading cui-loading-2"></div>')},success:function(t){"error"!=t?e("#cui-modal-preview").html(t):e("#cui-modal-preview").html('<p class="cui-modal-error">Invalid video url</p>')},error:function(t){e("#cui-modal-preview").html('<p class="cui-modal-error">Failed to process, try again</p>')},complete:function(t,i){e(".cui-modal-video").find("a.cui-modal-verifique").attr("id","cui-modal-verifique-video")}})})),e(document).delegate("#cui-modal-close, .cui-modal-cancel","click",(function(e){return e.preventDefault(),t(),!1})),e(document).delegate("a.cui-rating-link","click",(function(t){return t.preventDefault(),function(t,i){var a=e("#cui-comment-"+t).find(".cui-rating-count"),n=a.text();jQuery.ajax({type:"POST",url:CUI.ajaxurl,data:{action:"comment_rating",comment_id:t,method:i,nonce:CUI.nonce},beforeSend:function(){a.html("").addClass("cuio-loading")},success:function(t){var i=e.parseJSON(t);!0===i.success?(a.html(i.likes).attr("title",i.likes+" "+CUI_WP.textLikes),i.likes<0?a.removeClass().addClass("cui-rating-count cui-rating-negative"):i.likes>0?a.removeClass().addClass("cui-rating-count cui-rating-positive"):a.removeClass().addClass("cui-rating-count cui-rating-neutral")):a.html(n)},error:function(e){a.html(n)},complete:function(e){a.removeClass("cuio-loading")}})}(e(this).attr("href").split("=")[1].replace("&method",""),e(this).attr("href").split("=")[2]),!1})),e(document).delegate("a.cui_note_button","click",(function(t){t.preventDefault(),e(this).closest(".cui-select-attending").find(".cui_note_texarea").toggleClass("active")}))}));